<?xml version="1.0" encoding="gb2312" standalone="yes"?>
<metalib name="WeTestProtocol" tagsetversion="1" version="1">
	<macro name="VERSION" value="1" desc="版本号"/>
	<macro name="PKG_MAX_BODY_LEN" value="200000"/>
	<union name="CsPkgBody" version="1">
		<!--Device and Server-->
		<!--<entry name="RegistDeviceReq" type="RegistDeviceReq" id="CMD_REGIST_DEVICE_REQ"/>
		<entry name="RegistDeviceRes" type="RegistDeviceRes" id="CMD_REGIST_DEVICE_RES"/>
		<entry name="UploadImgReq" type="UploadImgReq" id="CMD_UPLOAD_IMG_REQ"/>
		<entry name="ReportStatusReq" type="ReportStatusReq" id="CMD_REPORT_STATUS_REQ"/>
		<entry name="StartTestNotify" type="StartTestNotify" id="CMD_START_TEST_NOTIFY"/>
		<entry name="AllocSvrReq" type="AllocSvrReq" id="CMD_ALLOC_SVR_REQ"/>
		<entry name="AllocSvrRes" type="AllocSvrRes" id="CMD_ALLOC_SVR_RES"/>
		<entry name="TouchScreenNotify" type="TouchScreenNotify" id="CMD_TOUCH_SCREEN_NOTIFY"/>
		<entry name="MultiTouchScreenNotify" type="MultiTouchScreenNotify" id="CMD_MULTI_TOUCH_SCREEN_NOTIFY"/>
		<entry name="PressButtonNotify" type="PressButtonNotify" id="CMD_PRESS_BUTTON_NOTIFY"/>
		<entry name="ReportTestStatusReq" type="ReportTestStatusReq" id="CMD_REPORT_TEST_STATUS_REQ"/>
		<entry name="QueryDeviceReq" type="QueryDeviceReq" id="CMD_QUERY_DEVICE_REQ"/>
		<entry name="QueryDeviceRes" type="QueryDeviceRes" id="CMD_QUERY_DEVICE_RES"/>
		<entry name="SwitchNetworkNotify" type="SwitchNetworkNotify" id="CMD_SWITCH_NETWORK_NOTIFY"/>
		<entry name="StartInterruptNotify" type="StartInterruptNotify" id="CMD_START_INTERRUPT_NOTIFY"/>
		<entry name="InstallApkNotify" type="InstallApkNotify" id="CMD_INSTALL_APK_NOTIFY"/>
		<entry name="ReportTouchReq" type="ReportTouchReq" id="CMD_REPORT_TOUCH_REQ"/>
		<entry name="InputStringNotify" type="InputStringNotify" id="CMD_INPUT_STRING_NOTIFY"/>
		<entry name="KeyboardInputNotify" type="KeyboardInputNotify" id="CMD_KEYBOARD_INPUT_NOTIFY"/>
		<entry name="AppReportReq" type="AppReportReq" id="CMD_APP_REPORT_REQ"/>
		<entry name="UninstallApkNotify" type="UninstallApkNotify" id="CMD_UNINSTALL_APK_NOTIFY"/>
		<entry name="ReportInstallStatusReq" type="ReportInstallStatusReq" id="CMD_REPORT_INSTALL_STATUS_REQ"/>
		<entry name="ReportBattReq" type="ReportBattReq" id="CMD_REPORT_BATT_REQ"/>
		<entry name="GetDeviceIDReq" type="GetDeviceIDReq" id="CMD_GET_DEVICE_ID_REQ"/>
		<entry name="AutoLoginNotify" type="AutoLoginNotify" id="CMD_AUTO_LOGIN_NOTIFY"/>
		<entry name="ReportConsoleReq" type="ReportData" id="CMD_REPORT_CONSOLE_REQ"/>
		<entry name="ReportTestResultReq" type="ReportTestResultReq" id="CMD_REPORT_TEST_RESULT_REQ"/>
		<entry name="UploadTestImgReq" type="UploadTestImgReq" id="CMD_UPLOAD_TEST_IMG_REQ"/>
		<entry name="ReportErrorMessageReq" type="ReportErrorMessageReq" id="CMD_REPORT_ERROR_MESSAGE_REQ"/>
		<entry name="ReportInstallTimeReq" type="ReportInstallTimeReq" id="CMD_REPORT_INSTALL_TIME_REQ"/>
		<entry name="ReportLaunchTimeReq" type="ReportLaunchTimeReq" id="CMD_REPORT_LAUNCH_TIME_REQ"/>
		<entry name="AddSceneTagReq" type="AddSceneTagReq" id="CMD_ADD_SCENE_TAG_REQ"/>
		<entry name="ReportDeviceIPReq" type="ReportDeviceIPReq" id="CMD_REPORT_DEVICE_IP_REQ"/> -->
		<entry name="AllocSvrReq" type="AllocSvrReq" id="CMD_ALLOC_SVR_REQ"/>
		<entry name="AllocSvrRes" type="AllocSvrRes" id="CMD_ALLOC_SVR_RES"/>
		<entry name="UploadTestImgWithTestIDReq" type="UploadTestImgWithTestIDReq" id="CMD_UPLOAD_TEST_IMG_WITH_TESTID_REQ"/>
		
		<!--<entry name="UploadImgWithTestIDReq" type="UploadImgWithTestIDReq" id="CMD_UPLOAD_IMG_WITH_TESTID_REQ"/>
		<entry name="DeviceCaptureReq" type="DeviceCaptureReq" id="CMD_CAPTURE_REQ"/>
		<entry name="TakeStreamSnapShotRes" type="TakeStreamSnapShotRes" id="CMD_TAKESTREAM_SNAPSHOT_RES" />
		<entry name="ReportBlackScreenReq" type="ReportBlackScreenReq" id="CMD_REPORT_BLACK_SCREEN_REQ" />

		<entry name="StartNewPerformanceTestReq" type="StartNewPerformanceTestReq" id="CMD_START_NEW_PERFORMANCE_TEST_REQ"/>
		<entry name="StartNewPerformanceTestRes" type="StartNewPerformanceTestRes" id="CMD_START_NEW_PERFORMANCE_TEST_RES"/>
		<entry name="ReportStatusWithKeyReq" type="ReportStatusWithKeyReq" id="CMD_REPORT_STATUS_WITH_KEY_REQ"/>
		<entry name="ReportStatusWithKeyRes" type="ReportStatusWithKeyRes" id="CMD_REPORT_STATUS_WITH_KEY_RES"/>
		<entry name="FinishPerformanceTestReq" type="FinishPerformanceTestReq" id="CMD_FINISH_PERFORMANCE_TEST_REQ"/>

		<entry name="UploadErrorLogReq" type="UploadErrorLogReq" id = "CMD_UPLOAD_ERROR_LOG_REQ"/>-->
		<entry name="UploadErrorInfoReq" type="UploadErrorInfoReq" id = "CMD_UPLOAD_ERROR_INFO_REQ"/>
		<!--<entry name="UploadLogReq" type="UploadLogReq" id = "CMD_UPLOAD_LOG_REQ"/> -->
		<entry name="ReportUIIssueReq" type="ReportUIIssueReq" id = "CMD_REPORT_UI_ISSUE_REQ"/>
		<!-- <entry name="GetDeviceTimeRes" type="GetDeviceTimeRes" id="CMD_GET_DEVICE_TIME_RES"/>
		<entry name="GetPCTimeRes"	type="GetPCTimeRes"	id="CMD_GET_PC_TIME_RES"/>
		<entry name="ReportDeviceLocationReq" type="ReportDeviceLocationReq" id="CMD_REPORT_DEVICE_LOCATION_REQ"/>
		<entry name="ReportDeviceCaptureTypeReq" type="ReportDeviceCaptureTypeReq" id="CMD_REPORT_DEVICE_CAPTURE_TYPE_REQ"/>
		<entry name="DeviceOrientationNotify" type="DeviceOrientationNotify" id="CMD_DEVICE_ORIENTATION_NOTIFY"/>
		<entry name="ReportStorageReq" type="ReportStorageReq" id="CMD_REPORT_STORAGE_REQ"/>
		<entry name="ReportTestStatusV2Req" type="ReportTestStatusV2Req" id="CMD_REPORT_TEST_STATUS_V2_REQ"/>
		<entry name="ReportErrorStatusReq" type="ReportErrorStatusReq" id="CMD_REPORT_ERROR_STATUS_REQ"/> -->

		<!--Script and Device -->
		<!--<entry name="StartCheckCrashAnrReq" type="StartCheckCrashAnrReq" id="CMD_START_CHECK_CRASH_ANR_REQ"	/>
		<entry name="CheckCaptureReq" type="CheckCaptureReq" id="CMD_CHECK_CAPTURE_REQ" />
		<entry name="CheckCaptureRes" type="CheckCaptureRes" id="CMD_CHECK_CAPTURE_RES" />
		<entry name="CheckTouchCaptureReq" type="CheckTouchCaptureReq" id="CMD_CHECK_TOUCH_CAPTURE_REQ"	/>
		<entry name="CheckTouchCaptureRes" type="CheckTouchCaptureRes" id="CMD_CHECK_TOUCH_CAPTURE_RES" />
		<entry name="ReportUIErrorReq" type="ReportUIErrorReq" id="CMD_REPORT_UI_ERROR_REQ" /> -->

		<!--flash and Other -->
		<!-- <entry name="PushImageNotify" type="PushImageNotify" id="CMD_PUSH_IMAGE_NOTIFY"/>
		<entry name="ReportTimeNotify" type="ReportTimeNotify" id="CMD_REPORT_TIME_NOTIFY"/>
		<entry name="StartAdbDebugReq" type="StartAdbDebugReq" id="CMD_START_ADB_DEBUG_REQ"/> -->
	</union>
	
	<struct name="CsPkgHead" version="1" desc="包头">
		<entry name="Len" type="uint" desc="包长"/>
		<entry name="DeviceID" type="uint32" desc="设备ID"/>
		<entry name="Cmd" type="uint16" desc="命令字"/>
		<entry name="Result" type="int" desc="错误码"/>
	</struct>

	<struct name="CsPkg" version="1" sizeinfo="Head.Len">
		<entry name="Head" type="CsPkgHead" desc="包头"/>
		<entry name="Body" type="CsPkgBody" desc="包体" select="Head.Cmd"/>
	</struct>
	
	<macrosgroup name="CmdType" desc="命令字">
		<macro name="CMD_ALLOC_SVR_REQ" value="1020" desc="申请服务器请求" />
		<macro name="CMD_ALLOC_SVR_RES" value="1021" desc="申请服务器响应" />
		<macro name="CMD_UPLOAD_TEST_IMG_WITH_TESTID_REQ" value="1067" desc="上传带有TestID的截图请求" />
        <macro name="CMD_REPORT_UI_ISSUE_REQ" value="1083" desc="上报UI问题请求"/>
        <macro name="CMD_REPORT_UI_ISSUE_RES" value="1084" desc="上报UI问题响应"/>
		<macro name="CMD_UPLOAD_ERROR_INFO_REQ" value="1094" desc="上报错误信息请求"/>
		<macro name="CMD_UPLOAD_ERROR_INFO_RES" value="1095" desc="上报错误信息响应"/>
	</macrosgroup>
	
	<struct name="AllocSvrReq" version="1">
        <entry name="Type" type="uint8" desc="服务器类型, 0.编码服务器 1.设备服务器"/>
    </struct>
	
	<struct name="AllocSvrRes" version="1">
        <entry name="Type" type="uint8" desc="服务器类型, 0.编码服务器 1.设备服务器"/>
        <entry name="SvrIP" type="uint" desc="服务器IP"/>
        <entry name="SvrPort" type="uint16" desc="服务器端口"/>
    </struct>
	
	<struct name="Image" version="1">
		<entry name="Len" type="int" desc="图像数据长度"/>
		<entry name="Data" type="uint8" count="PKG_MAX_BODY_LEN" refer="Len" desc="图像数据"/>
	</struct>
    <struct name="UploadTestImgWithTestIDReq" version="1">
		<entry name="TestID" type="uint32" desc="测试ID"/>
		<entry name="Index" type="uint" desc="图像序号"/>
		<entry name="Image" type="Image"/>
		<entry name="Timestamp" type="int64" desc="linux 时间戳精确到毫秒，从1970年1月1日开始"/>
	</struct>

	<struct name="ReportUIIssueReq" version="1">
        <entry name="IssueType" type="uint8" desc="问题类型,ref:UIIssueType"/>
        <entry name="Index" type="uint32" desc="图片序列"/>
        <entry name="time" type="int64" desc="时间戳" />
    </struct>
	
	<struct name="UploadErrorInfoReq" version="1">
        <entry name="Code" type="int32" desc="错误类型，ref ErrorCode"/>
        <entry name="Level" type="uint8" desc="错误级别，ref ErrorLevel"/>
        <entry name="Time" type="int64" desc="时间戳，毫秒级"/>
        <entry name="Scene" type="string" size="1024" desc="出现场景"/>
        <entry name="Desc" type="string" size="1024" desc="问题描述"/>
        <entry name="Content" type="string" size="102400" desc="问题具体内容,日志上下文"/>
    </struct>

    <macrosgroup name="UIIssueType" desc="UI问题类型">
		<macro name="TYPE_ISSUE_NORMAL" value="0" desc="申请服务器请求" />
		<macro name="TYPE_ISSUE_BLACK" value="1" desc="申请服务器响应" />
		<macro name="TYPE_ISSUE_WHITE" value="2" desc="上传带有TestID的截图请求" />
        <macro name="TYPE_ISSUE_BLACK_BORDER" value="4" desc="上报UI问题请求"/>
        <macro name="TYPE_ISSUE_SIMILAR" value="8" desc="上报UI问题请求"/>
	</macrosgroup>
	
	 <macrosgroup name="ErrorCode" desc="错误码">
    <macro name="ERR_NO_ERROR" value="0" desc="没有错误" />
    <macro name="ERR_DEVICE_UNEXIST" value="101" desc="设备不存在" />
    <macro name="ERR_PERMISSION_DENIED" value="102" desc="权限不足" />
    <macro name="ERR_SERVER_MEM_ERROR" value="103" desc="服务器内存错误" />
    <macro name="ERR_DEVICE_BUSY" value="104" desc="设备正在使用" />
    <macro name="ERR_INVALIED_REQ" value="105" desc="非法请求" />
    <macro name="ERR_VERSION_TOO_OLD" value="106" desc="终端版本太老" />
    <macro name="ERR_DEVICE_OFFLINE" value="107" desc="设备不在线" />
    <macro name="ERR_DOWNLOAD" value="108" desc="下载失败" />
    <macro name="ERR_APK" value="109" desc="apk错误" />
    <macro name="ERR_INSTALL" value="110" desc="安装失败" />
    <macro name="ERR_START_APP" value="111" desc="拉起应用失败" />
    <macro name="ERR_NO_SVR" value="112" desc="没有可用的服务器" />
    <macro name="ERR_APK_CRASH" value="113" desc="APK Crash" />
    <macro name="ERR_APK_UNINSTALL" value="114" desc="APK卸载失败" />
    <macro name="ERR_DOWNLOAD_SCRIPT" value="115" desc="下载脚本失败" />
    <macro name="ERR_OPEN_SCRIPT_FILE" value="116" desc="打开脚本失败" />
    <macro name="ERR_ERROR_SCRIPT" value="117" desc="脚本内容错误" />
    <macro name="ERR_ERROR_ADAPTER" value="118" desc="适配失败" />
    <macro name="ERR_ERROR_CANCELED" value="119" desc="已取消" />
    <macro name="ERR_DEVICE_FREE" value="120" desc="设备空闲中" />
    <macro name="ERR_ANR" value="121" desc="无响应" />
    <macro name="ERR_TEST_UNEXIST" value="122" desc="测试不存在" />
    <macro name="ERR_FAIL" value="123" desc="未知错误" />
    <macro name="ERR_LOGIN_FAIL" value="124" desc="登录失败" />
    <macro name="ERR_NO_QQ" value="125" desc="没有装QQ" />
    <macro name="ERR_NOT_IN_QQ_LOGIN_UI" value="126" desc="不在QQ登录界面" />
    <macro name="ERR_SWITCH_NETWORK" value="127" desc="切换网络失败" />
    <macro name="ERR_LAUNCH_QQ" value="128" desc="登录qq错误" />
    <macro name="ERR_WIFI_NOT_CONNECT" value="129" desc="WiFi未连接" />
	<macro name="ERR_AE_ERROR" value="130" desc="引擎自定义错误" />
	<macro name="ERR_ADB_DEVICE_OFFLINE" value="131" desc="adb error: device offline" />
	<macro name="ERR_ADB_DEVICE_NOT_FOUND" value="132" desc="adb error: device not found" />
	<macro name="ERR_NETWORK_NOT_CONNECT" value="133" desc="手机网络未连接" />
	<macro name="ERR_INSUFFICIENT_STORAGE" value="134" desc="内存不足" />
	<macro name="ERR_NO_DISK_SPACE" value="135" desc="磁盘空间不足" />
	<macro name="ERR_CONTROL_AUTH" value="136" desc="错误的控制权限" />
	<macro name="ERR_UI" value="137" desc="UI问题" />
	<macro name="ERR_FUNCTIONAL" value="138" desc="功能问题"/>
	<macro name="ERR_NORMAL_EXIT" value="139" desc="兼容性测试正常退出"/>
	<macro name="ERR_APK_EXCEPTION" value="140" desc="未造成程序退出的异常"/>
	<macro name="ERR_BLACK_IMAGE" value="141" desc="图片全黑"/>
	<macro name="ERR_WHITE_IMAGE" value="142" desc="图片全白"/>
	<macro name="ERR_BLACK_BORDER" value="143" desc="黑色边框"/>
	<macro name="ERR_SIMILAR_IMAGE" value="144" desc="与前一张图片相似"/>
	<macro name="ERR_START_APP_BY_PLATFORM" value="145" desc="由于平台问题导致的拉起应用失败"/>
	<macro name="ERR_ADB_SERVER_NOT_ACK" value="146" desc="adb error: Server didn't ACK"/>
	<macro name="ERR_ADB_DAEMON_NOT_RUNNING" value="147" desc="adb error: daemon not running"/>
	<macro name="ERR_SCRIPT_ERROR" value="148" desc="脚本自定义错误" />
  </macrosgroup>

  <macrosgroup name="ErrorLevel" desc="错误级别">
	<macro name="ERR_SUGGEST" value="4" desc="建议"/>
	<macro name="ERR_NORMAL" value="2" desc="一般"/>
	<macro name="ERR_CRITICAL" value="1" desc="严重"/>
	<macro name="ERR_FATAL" value="0" desc="致命"/>
  </macrosgroup>
</metalib>